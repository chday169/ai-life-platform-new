<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¨ Scratch æ•™æç€è¦½å™¨ | CHDAY169</title>
  <link rel="stylesheet" href="assets/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.worker.min.js';
  </script>
  <style>
    .viewer-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .scratch-theme {
      background: linear-gradient(135deg, #4a6fa5 0%, #6b8cbc 100%);
      color: white;
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 30px;
      text-align: center;
    }
    
    .viewer-content {
      display: grid;
      grid-template-columns: 320px 1fr;
      gap: 30px;
      margin-bottom: 40px;
    }
    
    .sidebar {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      height: fit-content;
    }
    
    .level-filter {
      margin-bottom: 20px;
    }
    
    .level-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    
    .level-btn {
      padding: 6px 12px;
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .level-btn.active {
      background: #4a6fa5;
      color: white;
      border-color: #4a6fa5;
    }
    
    .pdf-select {
      width: 100%;
      height: 350px;
      font-size: 0.95rem;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 8px;
      margin-bottom: 20px;
      background: #f8f9fa;
    }
    
    .nav-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .nav-btn {
      padding: 12px;
      font-size: 1rem;
      background: #4a6fa5;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }
    
    .nav-btn:hover {
      background: #3a5a8c;
      transform: translateY(-2px);
    }
    
    .back-btn {
      background: #6c757d;
    }
    
    .back-btn:hover {
      background: #545b62;
    }
    
    .viewer-main {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .pdf-canvas-container {
      text-align: center;
      margin-bottom: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
    }
    
    #pdfCanvas {
      max-width: 100%;
      height: auto;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      background: white;
    }
    
    .status-info {
      text-align: center;
      margin: 20px 0;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      font-weight: 600;
      color: #2c3e50;
    }
    
    .page-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .page-btn {
      padding: 12px 24px;
      background: #4a6fa5;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .page-btn:hover {
      background: #3a5a8c;
      transform: translateY(-2px);
    }
    
    .page-info {
      font-weight: 600;
      color: #2c3e50;
      font-size: 1.1rem;
    }
    
    .zoom-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin: 20px 0;
    }
    
    .zoom-btn {
      padding: 8px 16px;
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }
    
    .zoom-btn:hover {
      background: #4a6fa5;
      color: white;
    }
    
    .stats-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 30px;
      margin: 30px 0;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      flex-wrap: wrap;
    }
    
    .stat-block {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.1rem;
    }
    
    .stat-number {
      font-weight: bold;
      color: #4a6fa5;
      min-width: 60px;
      text-align: center;
    }
    
    .like-btn {
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      border: none;
      border-radius: 50%;
      background: #4a6fa5;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .like-btn:hover {
      background: #3a5a8c;
      transform: scale(1.1);
    }
    
    .like-btn.liked {
      background: #dc3545;
      animation: pulse 0.6s ease;
    }
    
    .scratch-features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    
    .feature-card {
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #4a6fa5;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    @media (max-width: 968px) {
      .viewer-content {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        order: 2;
      }
      
      .viewer-main {
        order: 1;
      }
      
      .pdf-select {
        height: 200px;
      }
    }
    
    @media (max-width: 768px) {
      .page-controls {
        flex-direction: column;
      }
      
      .stats-container {
        flex-direction: column;
        gap: 20px;
      }
      
      .scratch-features {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body class="container">
  <header class="page-header">
    <h1>ğŸ¨ Scratch æ•™æç€è¦½å™¨</h1>
    <p class="subtitle">Scratch ç¨‹å¼è¨­è¨ˆå­¸ç¿’è³‡æºèˆ‡æ•™å­¸æ•™æ</p>
  </header>
  
  <div class="scratch-theme">
    <h2>ğŸš€ Scratch ç¨‹å¼è¨­è¨ˆå­¸ç¿’</h2>
    <p>å¾åŸºç¤åˆ°é€²éšçš„å®Œæ•´ Scratch å­¸ç¿’è·¯å¾‘ï¼ŒåŒ…å«å‹•ç•«è¨­è¨ˆã€éŠæˆ²é–‹ç™¼èˆ‡å‰µæ„ç¨‹å¼æ•™å­¸</p>
  </div>
  
  <nav class="breadcrumb">
    <a href="index.html">é¦–é </a> &gt; <span>Scratch æ•™æ</span>
  </nav>
  
  <main class="viewer-container">
    <div class="viewer-content">
      <aside class="sidebar">
        <h3>ğŸ“š Scratch æ•™æé¸å–®</h3>
        
        <div class="level-filter">
          <h4>ğŸ” é›£åº¦ç­‰ç´š</h4>
          <div class="level-buttons">
            <button class="level-btn active" onclick="filterLevel('all')">å…¨éƒ¨</button>
            <button class="level-btn" onclick="filterLevel('beginner')">åˆéš</button>
            <button class="level-btn" onclick="filterLevel('intermediate')">ä¸­éš</button>
            <button class="level-btn" onclick="filterLevel('advanced')">é€²éš</button>
            <button class="level-btn" onclick="filterLevel('project')">å°ˆé¡Œå¯¦ä½œ</button>
          </div>
        </div>
        
        <select id="pdfSelect" size="8" class="pdf-select"></select>
        
        <div class="nav-buttons">
          <button onclick="prevPDF()" class="nav-btn">â¬…ï¸ ä¸Šä¸€æ•™æ</button>
          <button onclick="nextPDF()" class="nav-btn">â¡ï¸ ä¸‹ä¸€æ•™æ</button>
          <button onclick="goBack()" class="nav-btn back-btn">ğŸ”™ è¿”å›ä¸»é </button>
        </div>
        
        <div class="sidebar-info">
          <h4>ğŸ’¡ å­¸ç¿’å»ºè­°</h4>
          <ul style="font-size: 0.9rem; color: #495057;">
            <li>æŒ‰é †åºå­¸ç¿’æ•ˆæœæœ€ä½³</li>
            <li>å‹•æ‰‹å¯¦ä½œæ¯å€‹ç¯„ä¾‹</li>
            <li>å˜—è©¦ä¿®æ”¹å‰µé€ è®ŠåŒ–</li>
            <li>è¨˜éŒ„å­¸ç¿’ç­†è¨˜</li>
          </ul>
        </div>
      </aside>
      
      <section class="viewer-main">
        <div class="pdf-canvas-container">
          <canvas id="pdfCanvas"></canvas>
        </div>
        
        <div class="status-info" id="statusText">
          <span class="loading"></span>è«‹é¸æ“‡ Scratch æ•™æ
        </div>
        
        <div class="page-controls">
          <button onclick="prevPage()" class="page-btn">ğŸ“„ ä¸Šä¸€é </button>
          <span class="page-info" id="pageInfo">ç¬¬ 0 é  / å…± 0 é </span>
          <button onclick="nextPage()" class="page-btn">ğŸ“„ ä¸‹ä¸€é </button>
        </div>
        
        <div class="zoom-controls">
          <button onclick="zoomOut()" class="zoom-btn">ğŸ”-</button>
          <span>ç¸®æ”¾: <span id="zoomLevel">100%</span></span>
          <button onclick="zoomIn()" class="zoom-btn">ğŸ”+</button>
          <button onclick="resetZoom()" class="zoom-btn">ğŸ”„ é‡ç½®</button>
        </div>
        
        <div class="stats-container">
          <div class="stat-block">
            <span>ğŸ‘ï¸ å­¸ç¿’æ¬¡æ•¸ï¼š</span>
            <span class="stat-number" id="viewCount">0</span>
          </div>
          <div class="stat-block">
            <span>ğŸ‘ å¯¦ç”¨è©•åˆ†ï¼š</span>
            <span class="stat-number" id="likeCount">0</span>
          </div>
          <button id="likeBtn" class="like-btn" onclick="likePDF()" title="æ¨™è¨˜ç‚ºå¯¦ç”¨">ğŸ‘</button>
        </div>
        
        <div class="scratch-features">
          <div class="feature-card">
            <h4>ğŸ¯ åŸºç¤æ¦‚å¿µ</h4>
            <p>åº§æ¨™ã€ç§»å‹•ã€è¿´åœˆ</p>
          </div>
          <div class="feature-card">
            <h4>ğŸ® éŠæˆ²è¨­è¨ˆ</h4>
            <p>äº’å‹•èˆ‡éŠæˆ²é‚è¼¯</p>
          </div>
          <div class="feature-card">
            <h4>ğŸ¨ å‹•ç•«è£½ä½œ</h4>
            <p>è§’è‰²å‹•ç•«èˆ‡ç‰¹æ•ˆ</p>
          </div>
          <div class="feature-card">
            <h4>ğŸ§© é€²éšæŠ€å·§</h4>
            <p>è®Šæ•¸ã€æ¸…å–®ã€å‡½å¼</p>
          </div>
        </div>
      </section>
    </div>
  </main>
  
  <footer style="text-align: center; margin-top: 4rem; padding: 2rem; background: #f8f9fa; border-radius: 15px;">
    <h3>ğŸš€ Scratch å­¸ç¿’è·¯å¾‘</h3>
    <p>å¾åŸºç¤ç¨‹å¼æ¦‚å¿µåˆ°é€²éšå°ˆé¡Œé–‹ç™¼ï¼Œå»ºç«‹å®Œæ•´çš„ç¨‹å¼è¨­è¨ˆæ€ç¶­èˆ‡å‰µæ„å¯¦ç¾èƒ½åŠ›</p>
    
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
      <a href="https://scratch.mit.edu" target="_blank" class="btn">ğŸŒ Scratch å®˜æ–¹ç¶²ç«™</a>
      <a href="resources.html" class="btn btn-secondary">ğŸ”— æ›´å¤šå­¸ç¿’è³‡æº</a>
      <a href="video-player.html" class="btn btn-secondary">ğŸ¥ æ•™å­¸å½±ç‰‡</a>
    </div>
  </footer>
  
  <script>
    // Scratch æ•™ææ¸…å–®
    const manifestURL = './data_scr/manifest.json';
    
    let pdfList = [];
    let filteredList = [];
    let currentIndex = -1;
    let currentPage = 1;
    let totalPages = 1;
    let currentPDF = null;
    let hasLikedCurrentPDF = false;
    let currentScale = 1.5;
    
    // Scratch é›£åº¦ç­‰ç´š
    const levels = {
      'all': 'å…¨éƒ¨æ•™æ',
      'beginner': 'åˆéšå…¥é–€',
      'intermediate': 'ä¸­éšæ‡‰ç”¨', 
      'advanced': 'é€²éšæŠ€å·§',
      'project': 'å°ˆé¡Œå¯¦ä½œ'
    };
    
    async function loadPDFList() {
      try {
        document.getElementById('statusText').innerHTML = '<span class="loading"></span>è¼‰å…¥ Scratch æ•™ææ¸…å–®ä¸­...';
        
        // æ¸¬è©¦ç”¨è³‡æ–™ - å¯¦éš›ä½¿ç”¨æ™‚è«‹æ›¿æ›ç‚ºçœŸå¯¦çš„ manifest.json
        const testData = [
          {
            "id": "chapter0",
            "title": "ç¬¬0ç« ï¼šScratchå‰µæ„ç¨‹å¼è¨­è¨ˆå…¥é–€ç¯‡å°è®€",
            "level": "beginner",
            "url": "https://raw.githubusercontent.com/mozilla/pdf.js/gh-pages/web/compressed.tracemonkey-pldi-09.pdf",
            "views": 0,
            "likes": 0
          },
          {
            "id": "chapter1",
            "title": "ç¬¬1ç« ï¼šScratchç¨‹å¼èªè¨€ä»‹ç´¹",
            "level": "beginner",
            "url": "https://raw.githubusercontent.com/mozilla/pdf.js/gh-pages/web/compressed.tracemonkey-pldi-09.pdf",
            "views": 0,
            "likes": 0
          },
          {
            "id": "chapter2",
            "title": "ç¬¬2ç« ï¼šScratchä¸‹è¼‰å®‰è£æ•™å­¸",
            "level": "beginner",
            "url": "https://raw.githubusercontent.com/mozilla/pdf.js/gh-pages/web/compressed.tracemonkey-pldi-09.pdf",
            "views": 0,
            "likes": 0
          }
        ];
        
        // å˜—è©¦è¼‰å…¥æœ¬åœ°æ¸…å–®ï¼Œå¤±æ•—æ™‚ä½¿ç”¨æ¸¬è©¦è³‡æ–™
        try {
          const res = await fetch(manifestURL);
          if (res.ok) {
            const data = await res.json();
            if (Array.isArray(data)) {
              pdfList = data;
            } else {
              pdfList = testData;
            }
          } else {
            pdfList = testData;
          }
        } catch (err) {
          console.log('ä½¿ç”¨æ¸¬è©¦è³‡æ–™:', err);
          pdfList = testData;
        }
        
        // è¼‰å…¥æœ¬åœ°å„²å­˜çš„çµ±è¨ˆæ•¸æ“š
        loadLocalStats();
        
        // åˆå§‹åŒ–éæ¿¾åˆ—è¡¨
        filteredList = [...pdfList];
        updatePDFSelect();
        
        if (pdfList.length > 0) {
          showPDF(0);
        } else {
          document.getElementById('statusText').textContent = 'âŒ æ²’æœ‰å¯ç”¨çš„ Scratch æ•™æ';
        }
      } catch (err) {
        console.error('è¼‰å…¥éŒ¯èª¤ï¼š', err);
        document.getElementById('statusText').textContent = 'âŒ ç„¡æ³•è¼‰å…¥ Scratch æ•™ææ¸…å–®ï¼Œä½¿ç”¨æ¸¬è©¦æ¨¡å¼';
        // ä½¿ç”¨æ¸¬è©¦è³‡æ–™
        loadTestData();
      }
    }
    
    function loadTestData() {
      pdfList = [
        {
          "id": "test1",
          "title": "æ¸¬è©¦æ•™æ 1: Scratch å…¥é–€æ•™å­¸",
          "level": "beginner",
          "url": "https://raw.githubusercontent.com/mozilla/pdf.js/gh-pages/web/compressed.tracemonkey-pldi-09.pdf",
          "views": 0,
          "likes": 0
        },
        {
          "id": "test2", 
          "title": "æ¸¬è©¦æ•™æ 2: å‹•ç•«è¨­è¨ˆåŸºç¤",
          "level": "intermediate",
          "url": "https://raw.githubusercontent.com/mozilla/pdf.js/gh-pages/web/compressed.tracemonkey-pldi-09.pdf",
          "views": 0,
          "likes": 0
        }
      ];
      
      loadLocalStats();
      filteredList = [...pdfList];
      updatePDFSelect();
      
      if (pdfList.length > 0) {
        showPDF(0);
      }
    }
    
    function filterLevel(level) {
      // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
      document.querySelectorAll('.level-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      if (level === 'all') {
        filteredList = [...pdfList];
      } else {
        filteredList = pdfList.filter(item => item.level === level);
      }
      
      updatePDFSelect();
      
      if (filteredList.length > 0) {
        showPDF(0);
      } else {
        document.getElementById('statusText').textContent = `âŒ æ²’æœ‰${levels[level]}ç›¸é—œæ•™æ`;
        clearCanvas();
      }
    }
    
    function updatePDFSelect() {
      const select = document.getElementById('pdfSelect');
      select.innerHTML = '';
      filteredList.forEach((item, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = `${index + 1}. ${item.title}`;
        if (item.level) {
          option.textContent += ` [${levels[item.level]}]`;
        }
        select.appendChild(option);
      });
    }
    
    function loadLocalStats() {
      const stats = JSON.parse(localStorage.getItem('scr_stats') || '{}');
      pdfList.forEach((item, index) => {
        if (stats[item.title]) {
          item.views = stats[item.title].views || 0;
          item.likes = stats[item.title].likes || 0;
        } else {
          item.views = 0;
          item.likes = 0;
        }
      });
    }
    
    function saveLocalStats() {
      const stats = {};
      pdfList.forEach(item => {
        stats[item.title] = {
          views: item.views || 0,
          likes: item.likes || 0,
          lastViewed: new Date().toISOString()
        };
      });
      localStorage.setItem('scr_stats', JSON.stringify(stats));
    }
    
    function showPDF(index) {
      if (index < 0 || index >= filteredList.length) return;
      currentIndex = index;
      currentPage = 1;
      hasLikedCurrentPDF = false;
      
      const originalIndex = pdfList.findIndex(item => item.title === filteredList[index].title);
      const fileURL = filteredList[index].url;
      
      document.getElementById('statusText').innerHTML = '<span class="loading"></span>è¼‰å…¥ Scratch æ•™æä¸­â€¦';
      
      // è¨˜éŒ„é é¢è¨ªå•
      recordPageView('scratch_viewer');
      
      pdfjsLib.getDocument(fileURL).promise.then(pdf => {
        currentPDF = pdf;
        totalPages = pdf.numPages;
        renderPage(currentPage);
        
        // æ›´æ–°è¨ªå•æ¬¡æ•¸
        if (originalIndex >= 0) {
          pdfList[originalIndex].views = (pdfList[originalIndex].views || 0) + 1;
          saveLocalStats();
          updateStats(originalIndex);
        }
        
        document.getElementById('statusText').textContent =
          `ğŸ¨ ç•¶å‰æ•™æï¼š${filteredList[index].title} (${index + 1}/${filteredList.length})`;
      }).catch(err => {
        console.error('PDF è¼‰å…¥å¤±æ•—ï¼š', err.message);
        document.getElementById('statusText').textContent = 'âŒ ç„¡æ³•é¡¯ç¤º Scratch æ•™æï¼š' + err.message;
      });
      
      document.getElementById('pdfSelect').value = index;
    }
    
    function renderPage(pageNum) {
      if (!currentPDF) return;
      
      currentPDF.getPage(pageNum).then(page => {
        const viewport = page.getViewport({ scale: currentScale });
        const canvas = document.getElementById('pdfCanvas');
        const context = canvas.getContext('2d');
        
        // è¨­ç½® canvas å°ºå¯¸
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        
        const renderContext = {
          canvasContext: context,
          viewport: viewport
        };
        
        page.render(renderContext).promise.then(() => {
          document.getElementById('pageInfo').textContent = `ç¬¬ ${pageNum} é  / å…± ${totalPages} é `;
          document.getElementById('zoomLevel').textContent = Math.round(currentScale * 100) + '%';
        });
      }).catch(err => {
        console.error('é é¢æ¸²æŸ“å¤±æ•—ï¼š', err);
        document.getElementById('statusText').textContent = 'âŒ é é¢æ¸²æŸ“å¤±æ•—';
      });
    }
    
    function zoomIn() {
      currentScale += 0.25;
      if (currentPDF) renderPage(currentPage);
    }
    
    function zoomOut() {
      currentScale = Math.max(0.5, currentScale - 0.25);
      if (currentPDF) renderPage(currentPage);
    }
    
    function resetZoom() {
      currentScale = 1.5;
      if (currentPDF) renderPage(currentPage);
    }
    
    function clearCanvas() {
      const canvas = document.getElementById('pdfCanvas');
      const context = canvas.getContext('2d');
      context.clearRect(0, 0, canvas.width, canvas.height);
      canvas.width = 0;
      canvas.height = 0;
    }
    
    function prevPage() {
      if (currentPDF && currentPage > 1) {
        currentPage--;
        renderPage(currentPage);
      }
    }
    
    function nextPage() {
      if (currentPDF && currentPage < totalPages) {
        currentPage++;
        renderPage(currentPage);
      }
    }
    
    function prevPDF() {
      if (currentIndex > 0) {
        showPDF(currentIndex - 1);
      }
    }
    
    function nextPDF() {
      if (currentIndex < filteredList.length - 1) {
        showPDF(currentIndex + 1);
      }
    }
    
    function likePDF() {
      const originalIndex = pdfList.findIndex(item => item.title === filteredList[currentIndex].title);
      if (originalIndex >= 0 && !hasLikedCurrentPDF) {
        pdfList[originalIndex].likes = (pdfList[originalIndex].likes || 0) + 1;
        hasLikedCurrentPDF = true;
        saveLocalStats();
        updateStats(originalIndex);
        
        // æ·»åŠ å‹•ç•«æ•ˆæœ
        const likeBtn = document.getElementById('likeBtn');
        likeBtn.classList.add('liked');
        likeBtn.textContent = 'â¤ï¸';
        
        setTimeout(() => {
          likeBtn.classList.remove('liked');
          likeBtn.textContent = 'ğŸ‘';
        }, 600);
      }
    }
    
    function updateStats(index) {
      const item = pdfList[index];
      document.getElementById('viewCount').textContent = item.views || 0;
      document.getElementById('likeCount').textContent = item.likes || 0;
    }
    
    function goBack() {
      window.location.href = 'index.html';
    }
    
    function recordPageView(page) {
      const key = `views_${page}`;
      let count = parseInt(localStorage.getItem(key) || '0');
      count++;
      localStorage.setItem(key, count.toString());
    }
    
    // äº‹ä»¶ç›£è½å™¨
    document.addEventListener('DOMContentLoaded', function() {
      loadPDFList();
    });
    
    document.getElementById('pdfSelect').addEventListener('change', function () {
      const index = parseInt(this.value);
      if (!isNaN(index)) showPDF(index);
    });
    
    // éµç›¤å¿«æ·éµæ”¯æŒ
    document.addEventListener('keydown', function(event) {
      if (event.key === 'ArrowLeft') {
        prevPage();
      } else if (event.key === 'ArrowRight') {
        nextPage();
      } else if (event.key === 'ArrowUp') {
        prevPDF();
      } else if (event.key === 'ArrowDown') {
        nextPDF();
      } else if (event.key === '+') {
        zoomIn();
      } else if (event.key === '-') {
        zoomOut();
      }
    });
  </script>
</body>
</html>