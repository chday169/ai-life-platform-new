<!DOCTYPE html>
<html>
<head>
    <title>PDFç®¡ç†å·¥å…· - AIç”Ÿæ´»åˆ†äº«å¹³å°</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .tool-container { max-width: 800px; margin: 0 auto; }
        .drop-zone { 
            border: 3px dashed #6366f1; 
            padding: 40px; 
            text-align: center;
            margin: 20px 0;
            border-radius: 10px;
        }
        .pdf-list { margin: 20px 0; }
        .pdf-item { 
            padding: 10px; 
            border-bottom: 1px solid #ddd;
            display: flex; justify-content: space-between;
        }
        .controls { margin: 20px 0; }
        button { padding: 10px 20px; background: #6366f1; color: white; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="tool-container">
        <h1>ğŸ“ PDFè³‡æºç®¡ç†å·¥å…·</h1>
        
        <!-- æ­¥é©Ÿ1ï¼šé¸æ“‡PDFè³‡æ–™å¤¾ -->
        <div class="step">
            <h2>æ­¥é©Ÿ1ï¼šé¸æ“‡PDFæª”æ¡ˆ</h2>
            <input type="file" id="pdfInput" multiple accept=".pdf" webkitdirectory directory>
            <p>æˆ–å°‡PDFæª”æ¡ˆæ‹–æ”¾åˆ°ä¸‹æ–¹å€åŸŸ</p>
            <div class="drop-zone" id="dropZone">
                å°‡PDFæª”æ¡ˆæ‹–æ”¾åˆ°é€™è£¡
            </div>
        </div>
        
        <!-- æ­¥é©Ÿ2ï¼šé è¦½èˆ‡ç·¨è¼¯ -->
        <div class="step">
            <h2>æ­¥é©Ÿ2ï¼šç·¨è¼¯è³‡æºè³‡è¨Š</h2>
            <div class="pdf-list" id="pdfList"></div>
        </div>
        
        <!-- æ­¥é©Ÿ3ï¼šåŒ¯å‡º -->
        <div class="step">
            <h2>æ­¥é©Ÿ3ï¼šåŒ¯å‡ºmanifest.json</h2>
            <div class="controls">
                <button onclick="generateManifest()">ç”¢ç”Ÿmanifest.json</button>
                <button onclick="downloadManifest()">ä¸‹è¼‰æª”æ¡ˆ</button>
            </div>
            <textarea id="output" rows="10" style="width:100%; margin-top:20px;"></textarea>
        </div>
    </div>
    
    <script>
        let pdfFiles = [];
        
        // æª”æ¡ˆé¸æ“‡è™•ç†
        document.getElementById('pdfInput').addEventListener('change', function(e) {
            handleFiles(Array.from(e.target.files));
        });
        
        // æ‹–æ”¾è™•ç†
        const dropZone = document.getElementById('dropZone');
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.background = '#e0e7ff';
        });
        
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.background = '';
            const files = Array.from(e.dataTransfer.files).filter(f => f.name.endsWith('.pdf'));
            handleFiles(files);
        });
        
        function handleFiles(files) {
            pdfFiles = files.map(file => ({
                name: file.name,
                path: file.webkitRelativePath || file.name,
                title: file.name.replace('.pdf', '').replace(/_/g, ' '),
                category: 'tools',
                description: ''
            }));
            renderPDFList();
        }
        
        function renderPDFList() {
            const container = document.getElementById('pdfList');
            container.innerHTML = '';
            
            pdfFiles.forEach((pdf, index) => {
                const div = document.createElement('div');
                div.className = 'pdf-item';
                div.innerHTML = `
                    <div>
                        <strong>${pdf.title}</strong><br>
                        <small>${pdf.path}</small>
                    </div>
                    <div>
                        <select onchange="updateCategory(${index}, this.value)">
                            <option ${pdf.category === 'beginner' ? 'selected' : ''}>beginner</option>
                            <option ${pdf.category === 'tools' ? 'selected' : ''}>tools</option>
                            <option ${pdf.category === 'productivity' ? 'selected' : ''}>productivity</option>
                            <option ${pdf.category === 'design' ? 'selected' : ''}>design</option>
                            <option ${pdf.category === 'advanced' ? 'selected' : ''}>advanced</option>
                        </select>
                        <input type="text" value="${pdf.description}" placeholder="æè¿°" onchange="updateDescription(${index}, this.value)">
                    </div>
                `;
                container.appendChild(div);
            });
        }
        
        function updateCategory(index, category) {
            pdfFiles[index].category = category;
        }
        
        function updateDescription(index, description) {
            pdfFiles[index].description = description;
        }
        
        function generateManifest() {
            const manifest = pdfFiles.map((pdf, index) => ({
                id: `pdf-${index + 1}`,
                title: pdf.title,
                type: "pdf",
                category: pdf.category,
                url: `./data_ai/pdfs/${pdf.name}`,
                description: pdf.description || `${pdf.title}æ•™å­¸æ–‡ä»¶`,
                views: 0,
                likes: 0
            }));
            
            document.getElementById('output').value = JSON.stringify(manifest, null, 2);
        }
        
        function downloadManifest() {
            const content = document.getElementById('output').value;
            const blob = new Blob([content], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'manifest.json';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>